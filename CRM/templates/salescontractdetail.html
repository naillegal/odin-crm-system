{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="{% static "styles/style.css" %}" />
    <link rel="stylesheet" href="{% static "vendors/bootstrap.min.css" %}" />
    <title>Authentication Page</title>
    <style>
      html {
        background-color: #fff;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <script>
      function downloadPDF() {
        // PDF faylını yaratmadan öncə düyməni gizləyirik
        document.getElementById("pdf-button").style.display = "none";

        // PDF yaratmaq üçün element seçirik
        const element = document.body;

        // PDF faylını yaradırıq
        html2pdf()
          .from(element)
          .save()
          .then(() => {
            // PDF yaradıldıqdan sonra düyməni geri qaytarırıq
            document.getElementById("pdf-button").style.display = "block";
          });
      }
    </script>
  </head>
  <body style="background-color: #fff">
    <section id="sales-contract-upside">
      <div style="width: 95%; margin: auto" class="d-flex">
        <div style="width: 15%">
          <img
            style="width: 100%; margin-top: 18px"
            src="{% static "assets/log-main.png" %}"
            alt=""
          />
        </div>
        <div style="width: 70%; margin-top: 10px">
          <h5 style="color: #383957">ODİN PROJECT ENGINEERING MMC</h5>
          <h5 style="color: black">T +994 998 38 83 83</h5>
          <h6 style="color: #70b5df">www.odinproject.az</h6>
        </div>
        <div style="width: 15%">
          <img style="width: 70%" src="{% static "assets/rehau.png" %}" alt="" />
          <br />
          <img
            style="width: 70%; margin-top: 10px"
            src="{% static "assets/eliz-logo.png" %}"
            alt=""
          />
        </div>
      </div>
    </section>
    <section id="sales-form">
      <h2>SATIŞ SÖZLƏŞMƏSİ</h2>
      <p>Sıra № : {{ sales_contract.id }}</p>
      <form>
          <table>
              <tr>
                  <td><label for="musteri-adi">Müştəri Adı</label></td>
                  <td>
                      <input type="text" id="musteri-adi" value="{{ sales_contract.customer.full_name }}" readonly />
                  </td>
                  <td><label for="sistem-adi">Sistem Adı</label></td>
                  <td>
                      <input type="text" id="sistem-adi" value="{{ sales_contract.system_name }}" readonly />
                  </td>
              </tr>
              <tr>
                  <td><label for="adres">Adres</label></td>
                  <td><input type="text" id="adres" value="{{ sales_contract.customer.address }}" readonly /></td>
                  <td><label for="suse-qalinligi">Şüşə qalınlığı</label></td>
                  <td>
                      <input type="text" id="suse-qalinligi" value="{{ sales_contract.glass_thickness }}" readonly />
                  </td>
              </tr>
              <tr>
                  <td><label for="profil-rengi">Profil rəngi</label></td>
                  <td>
                      <input type="text" id="profil-rengi" value="{{ sales_contract.profile_color }}" readonly />
                  </td>
                  <td><label for="toplam-m2">Toplam m²</label></td>
                  <td><input type="text" id="toplam-m2" value="{{ sales_contract.total_size }}" readonly /></td>
              </tr>
              <tr>
                  <td><label for="telefon">Telefon</label></td>
                  <td>
                      <input type="tel" id="telefon" value="{{ sales_contract.customer.contact_number }}" readonly />
                  </td>
                  <td><label for="odeme-plani">Ödəniş növü</label></td>
                  <td>
                      <input type="text" id="odeme-plani" value="{{ sales_contract.payment_type }}" readonly />
                  </td>
              </tr>
              <tr>
                  <td><label for="satis-qiymeti">Satış Qiyməti</label></td>
                  <td><input type="text" id="satis-qiymeti" value="{{ sales_contract.sales_price }}" readonly /></td>
              </tr>
          </table>
      </form>
  </section>
  
  <section id="material-info">
    <div class="w95">
        <h3>MATERİAL XÜSUSİYYƏTLƏRİ:</h3>
        <ul>
            <li>
                * Şüşə məhsulu 8 mm tək qat şüşə <span>{% if sales_contract.is_single_glass %}(✓){% else %}( ){% endif %}</span> 
                və ya paket şüşə <span>{% if sales_contract.is_double_glass %}(✓){% else %}( ){% endif %}</span>
            </li>
            <li>
                * Paslanmayan alüminium profil və Rəngli 
                <span>{% if sales_contract.is_stainless_colored_glass %}(✓){% else %}( ){% endif %}</span>
            </li>
        </ul>
        <h6 style="text-align: right; padding: 0; margin: 0">
          Tarix: {{ sales_contract.created_at|date:"d.m.Y" }}
        </h6>
    </div>
</section>

    <hr />
    <section id="signatures">
      <div class="w-95">
        <div class="d-flex justify-content-between">
          <div>
            <div class="d-flex">
              <h6>Alıcı<span>(imza)</span></h6>
            </div>
            <hr style="width: 70%; margin: 10px 0px" />
            <div class="d-flex">
              <label for="alici-ad-soyad">Ad Soyad:</label>
              <input
                id="alici-ad-soyad"
                type="text"
                value="{{ sales_contract.customer.full_name }}"
              />
            </div>
            
          </div>
          <div>
            <div class="d-flex">
              <h6>Satıcı<span>(imza)</span></h6>
            </div>
            <hr style="width: 70%; margin: 10px 0px" />
            <div class="d-flex rel">
              <label for="satici-ad-soyad">Ad Soyad:</label>
              <input
                id="satici-ad-soyad"
                type="text"
                placeholder="Azər Mustafayev"
              />
              <div class="abs">
                <img src="{% static "assets/signature.png" %}" alt="" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="sales-pdf">
      <div class="d-flex justify-content-center">
        <button id="pdf-button" onclick="downloadPDF()">PDF kimi yüklə</button>
      </div>
    </section>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static "scripts/main.js" %}"></script>
  </body>
</html>
